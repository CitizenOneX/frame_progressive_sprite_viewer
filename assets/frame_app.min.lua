local a=require('data.min')local b=require('battery.min')local c=require('code.min')local d=require('sprite.min')local e=require('image_sprite_block.min')IMAGE_SPRITE_BLOCK=0x20;CLEAR_MSG=0x10;a.parsers[IMAGE_SPRITE_BLOCK]=e.parse_image_sprite_block;a.parsers[CLEAR_MSG]=c.parse_code;function app_loop()frame.display.text(" ",1,1)frame.display.show()local f=0;while true do local g=a.process_raw_items()if g>0 then if a.app_data[IMAGE_SPRITE_BLOCK]~=nil then local h=a.app_data[IMAGE_SPRITE_BLOCK]if h.current_sprite_index>0 then if h.progressive_render or h.active_sprites==h.total_sprites then for i=1,h.active_sprites do local j=h.sprites[i]local k=h.sprite_line_height*(i-1)frame.display.bitmap(1,k+1,j.width,2^j.bpp,0,j.pixel_data)end;frame.display.show()end end end;if a.app_data[CLEAR_MSG]~=nil then frame.display.text(" ",1,1)frame.display.show()a.app_data[CLEAR_MSG]=nil end end;f=b.send_batt_if_elapsed(f,120)frame.sleep(0.1)end end;app_loop()